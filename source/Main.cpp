#include <fstream>
#include <cstdint>
#include <iostream>
#include <iomanip>
#include <stdlib.h>
#include <stdio.h>
#include <vector>
#include <thread>
#include <chrono>
#include <dirent.h>

#include <switch.h>

#include "SavefileIO.h"
#include "Graphics/InitGL.h"
#include "Graphics/Font.h"
#include "Map.h"
#include "Accounts.h"
#include "Dialog.h"
#include "MapObject.hpp"
#include "LoadGamesave.h"

glm::vec2 p[900] = {
    glm::vec2(1047.5, -1787),
    glm::vec2(514.5, -1791),
    glm::vec2(-966.5, -1627),
    glm::vec2(-2248.5, -463),
    glm::vec2(4096, 1631),
    glm::vec2(3425, -2390.5),
    glm::vec2(2288.5, -702),
    glm::vec2(271.5, -3289.5),
    glm::vec2(4497.5, -1016.5),
    glm::vec2(4083.5, -2973.5),
    glm::vec2(-3696.5, 1684),
    glm::vec2(694.5, -3072.5),
    glm::vec2(-1190, -1116.5),
    glm::vec2(-1154.5, -245),
    glm::vec2(1785.5, -3009),
    glm::vec2(-2448.5, -3752),
    glm::vec2(4659, -2380),
    glm::vec2(-2697.5, -2105),
    glm::vec2(-387.5, -3151.5),
    glm::vec2(1398, 856.5),
    glm::vec2(-12, -2582),
    glm::vec2(4181, 2540.5),
    glm::vec2(2105, -2724),
    glm::vec2(1803.5, -3220),
    glm::vec2(-1996.5, -3619.5),
    glm::vec2(-3106, -2882),
    glm::vec2(-3437, -2979),
    glm::vec2(-4195, -3090),
    glm::vec2(-658, -3852),
    glm::vec2(-3752, -2531.5),
    glm::vec2(399, -2151),
    glm::vec2(-4064.5, 1679),
    glm::vec2(-1631.5, 515),
    glm::vec2(2407.5, 1613.5),
    glm::vec2(-2750.5, 2255),
    glm::vec2(3526, -1710.5),
    glm::vec2(3433, -1150.5),
    glm::vec2(4704.5, 1353),
    glm::vec2(4636, 1836.5),
    glm::vec2(4357, 1528),
    glm::vec2(-254, 994.5),
    glm::vec2(4282.5, -1655.5),
    glm::vec2(4271.5, -1980.5),
    glm::vec2(4111.5, -2587),
    glm::vec2(-1148.5, 223),
    glm::vec2(3152.5, 3328.5),
    glm::vec2(3027, -3654),
    glm::vec2(2951.5, -3003.5),
    glm::vec2(1832.5, 535.5),
    glm::vec2(1562.5, -2898.5),
    glm::vec2(-227.5, -3344),
    glm::vec2(3085, 167),
    glm::vec2(4139, 410),
    glm::vec2(3455, -550.5),
    glm::vec2(4568, -646.5),
    glm::vec2(-2175, -463.5),
    glm::vec2(-2429, -1921.5),
    glm::vec2(-4325.5, -698.5),
    glm::vec2(-4343, -780.5),
    glm::vec2(-4183.5, -291),
    glm::vec2(1373, -2748),
    glm::vec2(2941.5, -3430.5),
    glm::vec2(963.5, -3371),
    glm::vec2(1012, -3255),
    glm::vec2(-610, -2390.5),
    glm::vec2(1188.5, -2476.5),
    glm::vec2(-2066.5, -2397),
    glm::vec2(-4374, -2587),
    glm::vec2(-4353.5, -1837),
    glm::vec2(-1856, 1192.5),
    glm::vec2(4344, 3178.5),
    glm::vec2(-643, -877),
    glm::vec2(-4167, 3616),
    glm::vec2(-3675, 393.5),
    glm::vec2(-3961.5, 3721),
    glm::vec2(1725.5, 2554),
    glm::vec2(1868, 2400.5),
    glm::vec2(-1226.5, 1001.5),
    glm::vec2(-3213, 574),
    glm::vec2(-3829, 118.5),
    glm::vec2(-2826.5, 1580),
    glm::vec2(-2030.5, 545.5),
    glm::vec2(-1964.5, 584),
    glm::vec2(-2548, 306.5),
    glm::vec2(-1115.5, 528.5),
    glm::vec2(-3661.5, 829),
    glm::vec2(-4022, 2350),
    glm::vec2(-4397, 2050),
    glm::vec2(-254, 425.5),
    glm::vec2(-230.5, 630.5),
    glm::vec2(-2884, 2398),
    glm::vec2(1544.5, 1837.5),
    glm::vec2(2275, 720),
    glm::vec2(-4193.5, 2681),
    glm::vec2(-4228, 3135),
    glm::vec2(-2338, 1728),
    glm::vec2(-4210, -1133.5),
    glm::vec2(-890.5, -1889.5),
    glm::vec2(1936, -2567.5),
    glm::vec2(2059.5, -1212.5),
    glm::vec2(867.5, -1903.5),
    glm::vec2(644, -1762.5),
    glm::vec2(315.5, -1765),
    glm::vec2(-954.5, -1721.5),
    glm::vec2(-1382, -1861.5),
    glm::vec2(1258, -1851),
    glm::vec2(-1503.5, -1923.5),
    glm::vec2(-1362.5, -2219.5),
    glm::vec2(-1441.5, -2105),
    glm::vec2(-1134, -1921),
    glm::vec2(-1173.5, -2319.5),
    glm::vec2(-1197, -2326.5),
    glm::vec2(-809, -1966.5),
    glm::vec2(-789, -2261),
    glm::vec2(-428, -2022.5),
    glm::vec2(-422, -1994.5),
    glm::vec2(-848.5, -1669.5),
    glm::vec2(-769.5, -1578.5),
    glm::vec2(-820.5, -1550.5),
    glm::vec2(-1339, -1677.5),
    glm::vec2(4209, -2269.5),
    glm::vec2(1803, -991),
    glm::vec2(3894.5, 705.5),
    glm::vec2(2163, -1039),
    glm::vec2(-4066.5, -442.5),
    glm::vec2(2746, 180),
    glm::vec2(-4688.5, -842),
    glm::vec2(3304, -20.5),
    glm::vec2(-653, -1388.5),
    glm::vec2(-1674.5, -1400),
    glm::vec2(-1364.5, -1163.5),
    glm::vec2(-1223.5, -1357),
    glm::vec2(-3354.5, -2275),
    glm::vec2(672, -1636.5),
    glm::vec2(852.5, -1627.5),
    glm::vec2(-1494, -1830),
    glm::vec2(3327, 525),
    glm::vec2(3886.5, 1340.5),
    glm::vec2(4530.5, 2094.5),
    glm::vec2(-1024.5, -560),
    glm::vec2(-460.5, -1275.5),
    glm::vec2(2511.5, -1571.5),
    glm::vec2(627.5, -182.5),
    glm::vec2(386.5, -131),
    glm::vec2(4501.5, 3165.5),
    glm::vec2(683.5, 636.5),
    glm::vec2(838.5, 694),
    glm::vec2(3785, -2123.5),
    glm::vec2(3166.5, -1833.5),
    glm::vec2(3152.5, -2404.5),
    glm::vec2(2048, -2093.5),
    glm::vec2(2327.5, -1829),
    glm::vec2(2482.5, -2103),
    glm::vec2(1752, -1544.5),
    glm::vec2(-103, -2301),
    glm::vec2(76.5, -2302),
    glm::vec2(172, -1726.5),
    glm::vec2(104.5, -1716),
    glm::vec2(1936, -2778.5),
    glm::vec2(1244, -1942),
    glm::vec2(1040, -1318.5),
    glm::vec2(2, -1895.5),
    glm::vec2(161.5, -1949),
    glm::vec2(-39, -2514),
    glm::vec2(-385, 995.5),
    glm::vec2(-3887, -2967.5),
    glm::vec2(-1662, -2344),
    glm::vec2(-1809.5, -2463),
    glm::vec2(603, -2410.5),
    glm::vec2(3742, -1154.5),
    glm::vec2(3798, -1271),
    glm::vec2(215, -3496.5),
    glm::vec2(3566, 916.5),
    glm::vec2(2148, -796.5),
    glm::vec2(269, -3666.5),
    glm::vec2(1388.5, 112.5),
    glm::vec2(4537.5, -1017),
    glm::vec2(3675.5, -2419.5),
    glm::vec2(3350.5, -2255.5),
    glm::vec2(-191.5, -1833.5),
    glm::vec2(-106.5, -1049.5),
    glm::vec2(55.5, -1760),
    glm::vec2(224.5, -1705.5),
    glm::vec2(-750.5, -893.5),
    glm::vec2(231.5, -1600.5),
    glm::vec2(-3561, 1759),
    glm::vec2(87, -1587.5),
    glm::vec2(314, -1400),
    glm::vec2(334, -1275.5),
    glm::vec2(-2361, 1872),
    glm::vec2(516, -1484),
    glm::vec2(668.5, -1467.5),
    glm::vec2(4697.5, 546),
    glm::vec2(786, -1470),
    glm::vec2(293.5, -1212.5),
    glm::vec2(1631, 2933.5),
    glm::vec2(-1735, -1822),
    glm::vec2(-1743.5, -1470),
    glm::vec2(-1292.5, -1388.5),
    glm::vec2(-1317, -1262.5),
    glm::vec2(-1152.5, -1220.5),
    glm::vec2(-1057, -1335),
    glm::vec2(-1136.5, -1031),
    glm::vec2(3794.5, -3624.5),
    glm::vec2(-1157.5, -963),
    glm::vec2(-1106, -902.5),
    glm::vec2(-1010.5, -933),
    glm::vec2(-1575.5, -1590),
    glm::vec2(-1504.5, -922.5),
    glm::vec2(-1441.5, -845.5),
    glm::vec2(-1249.5, -718.5),
    glm::vec2(-1313.5, -624),
    glm::vec2(-1120, -419),
    glm::vec2(-1336.5, -366.5),
    glm::vec2(-1336.5, -249),
    glm::vec2(711.5, -1331.5),
    glm::vec2(513.5, -1169.5),
    glm::vec2(1294, -1332.5),
    glm::vec2(1378, -1682),
    glm::vec2(1099.5, -1890.5),
    glm::vec2(-305.5, 1167),
    glm::vec2(811.5, -2091),
    glm::vec2(4396.5, 2721.5),
    glm::vec2(704.5, -1794),
    glm::vec2(2560.5, -3602.5),
    glm::vec2(550.5, -1897.5),
    glm::vec2(2925, -1394.5),
    glm::vec2(-1794.5, -1625),
    glm::vec2(1449, -3531.5),
    glm::vec2(1375.5, -3501),
    glm::vec2(-1151.5, 283.5),
    glm::vec2(-1255, 239.5),
    glm::vec2(-891.5, 285),
    glm::vec2(835, -2425.5),
    glm::vec2(516, -2492),
    glm::vec2(-661, 437.5),
    glm::vec2(-806.5, 401.5),
    glm::vec2(-548, 229),
    glm::vec2(-664.5, 544.5),
    glm::vec2(-764.5, 607.5),
    glm::vec2(-798.5, 560),
    glm::vec2(2140, -3531.5),
    glm::vec2(-65.5, -2332.5),
    glm::vec2(807, -3116.5),
    glm::vec2(823.5, -3008),
    glm::vec2(588, -2675),
    glm::vec2(1638, -1375.5),
    glm::vec2(-4306.5, -3461.5),
    glm::vec2(2923, -333),
    glm::vec2(-4345, -3714),
    glm::vec2(3208.5, -24),
    glm::vec2(-4861, -3833),
    glm::vec2(-2549.5, -3952),
    glm::vec2(-3030.5, -3755),
    glm::vec2(-3287, -3785.5),
    glm::vec2(-2632.5, -3303),
    glm::vec2(-2919, -3061.5),
    glm::vec2(-2684.5, -2930),
    glm::vec2(-2629, -2749.5),
    glm::vec2(-2300, -2848.5),
    glm::vec2(3293.5, 260.5),
    glm::vec2(-3331.5, 2299.5),
    glm::vec2(-2023, -2880),
    glm::vec2(-1936.5, -2671.5),
    glm::vec2(-1461.5, -2953.5),
    glm::vec2(-1539.5, -3071),
    glm::vec2(-1599, -3099),
    glm::vec2(-2172, -3201.5),
    glm::vec2(-1925, -3279.5),
    glm::vec2(2705, -1167),
    glm::vec2(3179, -1605),
    glm::vec2(3173.5, -1488.5),
    glm::vec2(4442, -1437.5),
    glm::vec2(4617, -1921),
    glm::vec2(4513, -2311.5),
    glm::vec2(961, -941),
    glm::vec2(4535.5, -2521),
    glm::vec2(1600.5, -810.5),
    glm::vec2(1775, -963),
    glm::vec2(1794, -1051.5),
    glm::vec2(1799.5, -1076),
    glm::vec2(1957, -1060),
    glm::vec2(1938.5, -1112.5),
    glm::vec2(-3778.5, 1865),
    glm::vec2(-3628.5, 1804.5),
    glm::vec2(2207.5, -1374.5),
    glm::vec2(1933.5, -1220.5),
    glm::vec2(1739, -1185.5),
    glm::vec2(1672.5, -1159),
    glm::vec2(1552.5, -1299),
    glm::vec2(-2258.5, -2224),
    glm::vec2(1754.5, -1920),
    glm::vec2(1875.5, -2051.5),
    glm::vec2(2497.5, -1804.5),
    glm::vec2(2367, -2301),
    glm::vec2(1887, -2418.5),
    glm::vec2(1682, -2329),
    glm::vec2(1967.5, -2635.5),
    glm::vec2(1518, -1850),
    glm::vec2(3279.5, -1438.5),
    glm::vec2(2104, -2628.5),
    glm::vec2(1385, -2274),
    glm::vec2(-133, -3804),
    glm::vec2(10, -3790),
    glm::vec2(260.5, -3832),
    glm::vec2(418, -3850.5),
    glm::vec2(-877.5, -3567.5),
    glm::vec2(-1173.5, -3579),
    glm::vec2(-421, -3369.5),
    glm::vec2(-94.5, -3130.5),
    glm::vec2(220, -2865),
    glm::vec2(174.5, -2903.5),
    glm::vec2(201, -2606),
    glm::vec2(-2.5, -2613),
    glm::vec2(3737, 2883.5),
    glm::vec2(-2080, -1480.5),
    glm::vec2(4236, 211.5),
    glm::vec2(-1720, -2240.5),
    glm::vec2(2685, -567),
    glm::vec2(-4353, -711.5),
    glm::vec2(-1931, -3244.5),
    glm::vec2(-1525.5, -3406.5),
    glm::vec2(-1611.5, -3677),
    glm::vec2(-4226, -2740),
    glm::vec2(-4159.5, -3825),
    glm::vec2(-4864.5, -3262),
    glm::vec2(2320.5, -1725),
    glm::vec2(-1410, 2305.5),
    glm::vec2(-1415, 2220.5),
    glm::vec2(-1581.5, 2128.5),
    glm::vec2(2408, -2513),
    glm::vec2(1739, -3453),
    glm::vec2(2303, -2380),
    glm::vec2(1815, -3743.5),
    glm::vec2(4109, 1351),
    glm::vec2(3231.5, -1547),
    glm::vec2(1774, -2933.5),
    glm::vec2(1801, -3157.5),
    glm::vec2(-1356.5, -3672.5),
    glm::vec2(-1376.5, -3328.5),
    glm::vec2(-725, -133.5),
    glm::vec2(2293.5, -3028),
    glm::vec2(2031.5, -3168),
    glm::vec2(-3152, 1563),
    glm::vec2(476, -2148),
    glm::vec2(-4224, 1744),
    glm::vec2(-4036, 1746),
    glm::vec2(-2976, 1875.5),
    glm::vec2(-2317.5, 805.5),
    glm::vec2(-3225.5, -1020.5),
    glm::vec2(-2543.5, -640.5),
    glm::vec2(-2493.5, -591.5),
    glm::vec2(-2478.5, -547),
    glm::vec2(-2482, -504),
    glm::vec2(-2450.5, -372.5),
    glm::vec2(703.5, 811.5),
    glm::vec2(1414, 1762.5),
    glm::vec2(3123, 19),
    glm::vec2(2751.5, 1676),
    glm::vec2(1939.5, 1217),
    glm::vec2(1695, 860.5),
    glm::vec2(-3716, 1039),
    glm::vec2(-1501, -154.5),
    glm::vec2(-2302.5, -2560.5),
    glm::vec2(-2594, -2541),
    glm::vec2(-2814, -2248.5),
    glm::vec2(-2018.5, -2186.5),
    glm::vec2(1737, -85.5),
    glm::vec2(-4010.5, 1162.5),
    glm::vec2(-3971, 921),
    glm::vec2(-4058.5, 774.5),
    glm::vec2(-3966.5, 625),
    glm::vec2(-4037.5, 348),
    glm::vec2(-4027, 232.5),
    glm::vec2(-3421, 2068),
    glm::vec2(-3519, 450.5),
    glm::vec2(-3444.5, 663.5),
    glm::vec2(-3430.5, 710),
    glm::vec2(3442.5, -3123.5),
    glm::vec2(-389.5, 783.5),
    glm::vec2(-327.5, 1008.5),
    glm::vec2(-919.5, 1622.5),
    glm::vec2(-3443, 1324.5),
    glm::vec2(525, -3679.5),
    glm::vec2(1981.5, -454),
    glm::vec2(4197.5, -461),
    glm::vec2(2379, -376),
    glm::vec2(2471, -463.5),
    glm::vec2(2637.5, -373.5),
    glm::vec2(2890, -517),
    glm::vec2(2129.5, -679),
    glm::vec2(-2286, -469),
    glm::vec2(2240, -725.5),
    glm::vec2(2411.5, -851.5),
    glm::vec2(3899, -1557.5),
    glm::vec2(2727, -906),
    glm::vec2(3383, -983),
    glm::vec2(-3792.5, 2319.5),
    glm::vec2(3708, -1941),
    glm::vec2(2632.5, -1113.5),
    glm::vec2(2525.5, -1258),
    glm::vec2(1410.5, -3201.5),
    glm::vec2(4429.5, 3182),
    glm::vec2(-2008, 514.5),
    glm::vec2(2505.5, 1303.5),
    glm::vec2(3539, -1374.5),
    glm::vec2(4625, 635.5),
    glm::vec2(4699.5, 1001.5),
    glm::vec2(4704.5, 1036.5),
    glm::vec2(4695, 1776.5),
    glm::vec2(-382.5, 1108.5),
    glm::vec2(-255.5, 1055),
    glm::vec2(-251, 1064.5),
    glm::vec2(-157.5, 872),
    glm::vec2(-166, 859.5),
    glm::vec2(4426, 3332),
    glm::vec2(4818.5, 3094.5),
    glm::vec2(4509.5, 2643.5),
    glm::vec2(4088, -1142.5),
    glm::vec2(2409, 1226.5),
    glm::vec2(3815.5, 3418.5),
    glm::vec2(3951.5, -695),
    glm::vec2(3474, -1917.5),
    glm::vec2(4543.5, -2405.5),
    glm::vec2(581, -3007),
    glm::vec2(3901.5, -2098),
    glm::vec2(-4340.5, 2354.5),
    glm::vec2(285, -2256.5),
    glm::vec2(2863.5, -2183),
    glm::vec2(3291, -3345),
    glm::vec2(3363.5, -3656),
    glm::vec2(3516, -2629.5),
    glm::vec2(3641.5, -3261),
    glm::vec2(1690, -667),
    glm::vec2(-4072.5, 2545.5),
    glm::vec2(-1416, 2395),
    glm::vec2(3233, -2848.5),
    glm::vec2(-4155, 2613),
    glm::vec2(3145.5, -2238),
    glm::vec2(2990.5, -2274),
    glm::vec2(-4424, 3218),
    glm::vec2(3033.5, -2024.5),
    glm::vec2(-3352.5, 2992),
    glm::vec2(2810, -2390.5),
    glm::vec2(2715.5, -2343),
    glm::vec2(2835.5, -2120),
    glm::vec2(-2785, 2894),
    glm::vec2(-2835, 2832),
    glm::vec2(2279.5, -1502.5),
    glm::vec2(323.5, -1924.5),
    glm::vec2(4098.5, 1755.5),
    glm::vec2(2274, -1604),
    glm::vec2(2884.5, -1762.5),
    glm::vec2(-1692, 168.5),
    glm::vec2(2505.5, -3827.5),
    glm::vec2(3353, 3080.5),
    glm::vec2(3327, 3588.5),
    glm::vec2(278, -3503.5),
    glm::vec2(2856.5, -3652.5),
    glm::vec2(1514.5, -3723.5),
    glm::vec2(-3846.5, -1469),
    glm::vec2(-4134, -1720.5),
    glm::vec2(517, -3765.5),
    glm::vec2(1373.5, -3755),
    glm::vec2(-4001, 3623.5),
    glm::vec2(-4030.5, 3756.5),
    glm::vec2(-3756.5, 3847.5),
    glm::vec2(-1969.5, 3795),
    glm::vec2(-2040.5, -296.5),
    glm::vec2(1107.5, -553),
    glm::vec2(-3844, -1902.5),
    glm::vec2(1312.5, -504),
    glm::vec2(3730.5, 2674),
    glm::vec2(1446.5, -562.5),
    glm::vec2(-4179.5, -1483),
    glm::vec2(1435, -137),
    glm::vec2(881.5, -273.5),
    glm::vec2(1593.5, -115),
    glm::vec2(-1355.5, -998),
    glm::vec2(2086.5, -183.5),
    glm::vec2(-3064.5, -1288.5),
    glm::vec2(1185.5, 66),
    glm::vec2(1089, 215),
    glm::vec2(-3700.5, -804.5),
    glm::vec2(1104, 444.5),
    glm::vec2(1198.5, 1149.5),
    glm::vec2(4818.5, 3303),
    glm::vec2(3997, 3145.5),
    glm::vec2(1629.5, 550.5),
    glm::vec2(1284.5, 1121.5),
    glm::vec2(1267.5, 699.5),
    glm::vec2(2426.5, 410.5),
    glm::vec2(3174.5, -3822.5),
    glm::vec2(2966, -3381),
    glm::vec2(2635, -3198),
    glm::vec2(2877.5, -2687.5),
    glm::vec2(2182, -2535),
    glm::vec2(2286.5, -2658.5),
    glm::vec2(1945.5, -3008),
    glm::vec2(1658.5, -3163),
    glm::vec2(1494.5, -3373),
    glm::vec2(2517.5, 212.5),
    glm::vec2(2796, 499),
    glm::vec2(2664, 0.5),
    glm::vec2(2772.5, -351.5),
    glm::vec2(-2263, -2164.5),
    glm::vec2(4038, 1258),
    glm::vec2(3140.5, -326),
    glm::vec2(-152, -3070),
    glm::vec2(-1036, 445.5),
    glm::vec2(3321.5, 512),
    glm::vec2(3181.5, 3073.5),
    glm::vec2(3439, 2528),
    glm::vec2(3520.5, 382.5),
    glm::vec2(1633, -3886.5),
    glm::vec2(3208.5, 1012),
    glm::vec2(-868.5, -219.5),
    glm::vec2(4075, 463),
    glm::vec2(3526.5, 275.5),
    glm::vec2(-424.5, -151),
    glm::vec2(4081, 215),
    glm::vec2(4133.5, -61.5),
    glm::vec2(4294, -77.5),
    glm::vec2(4140.5, -199),
    glm::vec2(3855, -352.5),
    glm::vec2(3432, -525),
    glm::vec2(3271, -656.5),
    glm::vec2(3560, -627.5),
    glm::vec2(-2296.5, -344.5),
    glm::vec2(3721, -619.5),
    glm::vec2(-1881, 28.5),
    glm::vec2(4265, -628.5),
    glm::vec2(4451.5, -484.5),
    glm::vec2(-2200, -733.5),
    glm::vec2(-1962.5, -407.5),
    glm::vec2(-1997.5, -162.5),
    glm::vec2(3408.5, 1277.5),
    glm::vec2(3724.5, 1132),
    glm::vec2(-1126, -3627),
    glm::vec2(1841.5, -3599),
    glm::vec2(396, 626.5),
    glm::vec2(-1060.5, 1928),
    glm::vec2(3287.5, 1573.5),
    glm::vec2(506.5, 881.5),
    glm::vec2(-4608.5, -2340.5),
    glm::vec2(1427, 1545.5),
    glm::vec2(-2548.5, -2041),
    glm::vec2(-2415.5, -1928),
    glm::vec2(-4411.5, -333),
    glm::vec2(1307, -2436),
    glm::vec2(-3834.5, 2112),
    glm::vec2(2838, -3454.5),
    glm::vec2(2170, -3272.5),
    glm::vec2(1759, -3688.5),
    glm::vec2(1554, -3529),
    glm::vec2(1859, -3354),
    glm::vec2(1217, -3525.5),
    glm::vec2(1072.5, -3624.5),
    glm::vec2(742, -3243.5),
    glm::vec2(701, -3278.5),
    glm::vec2(1055, -3255),
    glm::vec2(704.5, -2960.5),
    glm::vec2(369, -3645.5),
    glm::vec2(640.5, -3712),
    glm::vec2(646.5, -3616.5),
    glm::vec2(890, -3694.5),
    glm::vec2(913, -3836.5),
    glm::vec2(286.5, -3903),
    glm::vec2(98.5, -3821.5),
    glm::vec2(-249.5, -3831),
    glm::vec2(-241.5, -3883),
    glm::vec2(-266, -3889),
    glm::vec2(-352, -3898.5),
    glm::vec2(-28.5, -3044.5),
    glm::vec2(65, -3221.5),
    glm::vec2(609, -2872),
    glm::vec2(415.5, -2877.5),
    glm::vec2(338.5, -2831),
    glm::vec2(165, -2783),
    glm::vec2(-68, -2439.5),
    glm::vec2(-73.5, -2416),
    glm::vec2(-54, -2492),
    glm::vec2(-400, -2559.5),
    glm::vec2(-466.5, -2907),
    glm::vec2(-602.5, -2659.5),
    glm::vec2(34.5, -2101.5),
    glm::vec2(215, -2072.5),
    glm::vec2(355, -1998),
    glm::vec2(624, -2301),
    glm::vec2(615, -2418.5),
    glm::vec2(679, -2502.5),
    glm::vec2(371.5, -2564),
    glm::vec2(283, -2404.5),
    glm::vec2(756, -2348.5),
    glm::vec2(890, -2391.5),
    glm::vec2(789.5, -2565.5),
    glm::vec2(1171.5, -2851),
    glm::vec2(1198.5, -3056),
    glm::vec2(1324.5, -3009.5),
    glm::vec2(1462, -2367.5),
    glm::vec2(1323, -2453.5),
    glm::vec2(-925.5, -3438),
    glm::vec2(-1257.5, -3134),
    glm::vec2(-1065, -2911.5),
    glm::vec2(-924.5, -2939.5),
    glm::vec2(-1011.5, -2640),
    glm::vec2(-1213, -2704),
    glm::vec2(-1378.5, -2743.5),
    glm::vec2(-1399.5, -2376.5),
    glm::vec2(-1656, -2309),
    glm::vec2(-1617.5, -2446.5),
    glm::vec2(-2207, -2550),
    glm::vec2(-2357.5, -2557),
    glm::vec2(-2059, -2416),
    glm::vec2(-2852.5, -2320.5),
    glm::vec2(-2462, -1711.5),
    glm::vec2(-2169.5, -2078.5),
    glm::vec2(-2062.5, -1851),
    glm::vec2(-3728.5, -3613),
    glm::vec2(-4709.5, -2177.5),
    glm::vec2(-4686.5, -1972.5),
    glm::vec2(-4172.5, -1991),
    glm::vec2(-4314.5, -1628.5),
    glm::vec2(-4264.5, -1694),
    glm::vec2(-4222.5, -1667),
    glm::vec2(-4076, -1596),
    glm::vec2(-3999, -1568),
    glm::vec2(-3713.5, -1556.5),
    glm::vec2(-3075, -2043.5),
    glm::vec2(-3130, -1469),
    glm::vec2(-2815, -1649.5),
    glm::vec2(-2647.5, -1536.5),
    glm::vec2(-2521.5, -1319.5),
    glm::vec2(-2849, -1229),
    glm::vec2(-2869, -1126.5),
    glm::vec2(-3070.5, -913),
    glm::vec2(2087.5, 3571),
    glm::vec2(2232, 3670),
    glm::vec2(1619, 3657.5),
    glm::vec2(1144, 3743.5),
    glm::vec2(605.5, 3634),
    glm::vec2(210.5, 3559.5),
    glm::vec2(-485, 3140),
    glm::vec2(1378, 1262.5),
    glm::vec2(-141.5, 1167),
    glm::vec2(-3677.5, 2467.5),
    glm::vec2(1551.5, 3108.5),
    glm::vec2(3573, 3046.5),
    glm::vec2(3322.5, 2802),
    glm::vec2(-3042.5, 2520),
    glm::vec2(-3061, 2815),
    glm::vec2(-3117, 2805.5),
    glm::vec2(3781.5, 3359),
    glm::vec2(-1861, -335),
    glm::vec2(-1968, -598.5),
    glm::vec2(-1730.5, -377),
    glm::vec2(-2053, -635.5),
    glm::vec2(-2732.5, -759.5),
    glm::vec2(-2349, -846.5),
    glm::vec2(-2647.5, -548.5),
    glm::vec2(-1093, 1734.5),
    glm::vec2(-770.5, -1380.5),
    glm::vec2(-3840.5, 803.5),
    glm::vec2(-163.5, 260.5),
    glm::vec2(97.5, 433),
    glm::vec2(-567.5, 2598),
    glm::vec2(3290, 1427),
    glm::vec2(-2945.5, 3147),
    glm::vec2(-2468, 2764.5),
    glm::vec2(1647, 2245),
    glm::vec2(2017.5, 2165.5),
    glm::vec2(1887, 2748.5),
    glm::vec2(-2211.5, 2908),
    glm::vec2(-2343.5, -1105.5),
    glm::vec2(-2098.5, -1106.5),
    glm::vec2(-1819, -976),
    glm::vec2(-1405.5, -453),
    glm::vec2(80, 409.5),
    glm::vec2(-237, 743),
    glm::vec2(-248.5, 741.5),
    glm::vec2(-427, -1192.5),
    glm::vec2(-601.5, -1072.5),
    glm::vec2(3178, -3202.5),
    glm::vec2(910.5, -2196),
    glm::vec2(-4256.5, 78.5),
    glm::vec2(-3328, 337.5),
    glm::vec2(-4327.5, 2052.5),
    glm::vec2(-4157.5, 3403.5),
    glm::vec2(-4397.5, 3771.5),
    glm::vec2(-3575, 3271.5),
    glm::vec2(-3796, 3035),
    glm::vec2(-2524, 1734.5),
    glm::vec2(-3206.5, 329),
    glm::vec2(316.5, -527.5),
    glm::vec2(-2516, 1436),
    glm::vec2(-2036, 1620.5),
    glm::vec2(-1885.5, 1812.5),
    glm::vec2(-1050, 2614.5),
    glm::vec2(-3209, 493.5),
    glm::vec2(-3107.5, 915.5),
    glm::vec2(-3086.5, 1112),
    glm::vec2(4336, 2438.5),
    glm::vec2(-2214, 1620.5),
    glm::vec2(-1096.5, 3397.5),
    glm::vec2(-1113, 3042),
    glm::vec2(-1684, 2183),
    glm::vec2(-3019, -374.5),
    glm::vec2(-3500.5, 3577),
    glm::vec2(-3457, -167.5),
    glm::vec2(-1973, -1093.5),
    glm::vec2(-3479.5, 71.5),
    glm::vec2(-2834, 1593.5),
    glm::vec2(-3864, 149.5),
    glm::vec2(-2393.5, -1041),
    glm::vec2(-2456.5, -1161.5),
    glm::vec2(-1367, 3647),
    glm::vec2(224.5, -874.5),
    glm::vec2(68.5, -1438.5),
    glm::vec2(-1129.5, 676.5),
    glm::vec2(-3297.5, 1364),
    glm::vec2(3878, 2369.5),
    glm::vec2(4104, 2838),
    glm::vec2(615, 744),
    glm::vec2(2168, 2109.5),
    glm::vec2(-941.5, 816),
    glm::vec2(-1370.5, 114.5),
    glm::vec2(-1516, -56.5),
    glm::vec2(-1143.5, 761.5),
    glm::vec2(-933.5, 640),
    glm::vec2(-1095.5, 495.5),
    glm::vec2(-734.5, -330.5),
    glm::vec2(-707.5, -105.5),
    glm::vec2(-519, -94),
    glm::vec2(-365, -398),
    glm::vec2(-510.5, -554),
    glm::vec2(-121.5, -591.5),
    glm::vec2(-131, -947),
    glm::vec2(40.5, -1033),
    glm::vec2(-682, 860.5),
    glm::vec2(-3614.5, 3493),
    glm::vec2(65, -3149),
    glm::vec2(-2900, 2503.5),
    glm::vec2(-2919, -479.5),
    glm::vec2(-2909.5, -796.5),
    glm::vec2(-1555.5, -815),
    glm::vec2(-1984.5, -364),
    glm::vec2(-2314, -24),
    glm::vec2(-3805.5, 773),
    glm::vec2(-2717.5, 435),
    glm::vec2(-3276.5, 1865),
    glm::vec2(-754, 1083),
    glm::vec2(287.5, 723),
    glm::vec2(-1350.5, 2732),
    glm::vec2(-4122.5, 1935),
    glm::vec2(146.5, -299),
    glm::vec2(3085, -2883.5),
    glm::vec2(3968, 856),
    glm::vec2(4239.5, 994.5),
    glm::vec2(4042.5, 661),
    glm::vec2(4146, 593.5),
    glm::vec2(4331.5, 694),
    glm::vec2(3078, 3683),
    glm::vec2(-2204.5, 1767),
    glm::vec2(-2697.5, 766),
    glm::vec2(-2669.5, 864),
    glm::vec2(-2083.5, 1564.5),
    glm::vec2(-2217.5, 1563),
    glm::vec2(-2023, 1301),
    glm::vec2(-2386.5, 1148.5),
    glm::vec2(2313.5, 1133),
    glm::vec2(-2059, 778),
    glm::vec2(-2439, 489),
    glm::vec2(-2369, 345.5),
    glm::vec2(-1044.5, 2707.5),
    glm::vec2(-2637, 1247.5),
    glm::vec2(-1648, 40),
    glm::vec2(-1583.5, 226.5),
    glm::vec2(-1081.5, 1276.5),
    glm::vec2(1540, 2088.5),
    glm::vec2(-4881, -2470),
    glm::vec2(-874, 3313.5),
    glm::vec2(3732.5, 2423),
    glm::vec2(-1802.5, 1840.5),
    glm::vec2(235, 2942),
    glm::vec2(-4328.5, 2601.5),
    glm::vec2(-4507, 2148),
    glm::vec2(-4481.5, 1967.5),
    glm::vec2(-254.5, 266),
    glm::vec2(1404.5, 832.5),
    glm::vec2(-2633.5, 2055),
    glm::vec2(3601, 1008.5),
    glm::vec2(3113, 1295),
    glm::vec2(3709.5, 1684.5),
    glm::vec2(-324, 798.5),
    glm::vec2(-439.5, 932.5),
    glm::vec2(-369.5, 994.5),
    glm::vec2(-254.5, 632),
    glm::vec2(88, 634.5),
    glm::vec2(-2293, 3407),
    glm::vec2(-1257.5, 2365),
    glm::vec2(-1673.5, 2140),
    glm::vec2(-1310, 1940.5),
    glm::vec2(-4418.5, 2862.5),
    glm::vec2(-3798.5, -3430),
    glm::vec2(3661.5, 2065.5),
    glm::vec2(-1350.5, -3770),
    glm::vec2(3496, 3374),
    glm::vec2(3453, 3581.5),
    glm::vec2(2436, 1238),
    glm::vec2(-4113, -1378),
    glm::vec2(-704, 1444.5),
    glm::vec2(-2839.5, 2422),
    glm::vec2(-3280, 2616.5),
    glm::vec2(3237.5, 1526),
    glm::vec2(3299, 1586.5),
    glm::vec2(3297, 1417.5),
    glm::vec2(3009, 1199.5),
    glm::vec2(2550, 3595.5),
    glm::vec2(2471, 3178.5),
    glm::vec2(3372.5, 2315),
    glm::vec2(859.5, 3353),
    glm::vec2(3245.5, 1999),
    glm::vec2(3480, 2077),
    glm::vec2(4006.5, 2736.5),
    glm::vec2(1950, 1832.5),
    glm::vec2(2425.5, 1738),
    glm::vec2(2705, 1747.5),
    glm::vec2(-1528, 3479),
    glm::vec2(582, 1105),
    glm::vec2(179, 938.5),
    glm::vec2(-424.5, 1733.5),
    glm::vec2(-333.5, 1745),
    glm::vec2(-41, 2987),
    glm::vec2(-2994.5, 2168),
    glm::vec2(-3125, 1368.5),
    glm::vec2(2664, 3472),
    glm::vec2(-1764.5, 2350),
    glm::vec2(1684.5, 1720.5),
    glm::vec2(2478, 1392),
    glm::vec2(2755, 1368.5),
    glm::vec2(-3841.5, 3346),
    glm::vec2(-3410.5, 3508),
    glm::vec2(-3739, 2961.5),
    glm::vec2(-2851.5, 3489.5),
    glm::vec2(-239, 112.5),
    glm::vec2(-607.5, 675),
    glm::vec2(-2604.5, 3238),
    glm::vec2(-2257, 3085),
    glm::vec2(-2492.5, 3028),
    glm::vec2(-2987.5, 2693.5),
    glm::vec2(-2938.5, 2410.5),
    glm::vec2(-2735, 2584),
    glm::vec2(-2641.5, 2362.5),
    glm::vec2(-2790.5, 1943),
    glm::vec2(-2912, 1635.5),
    glm::vec2(-2385.5, 2128.5),
    glm::vec2(-2295.5, 2287),
    glm::vec2(-2022, 2464),
    glm::vec2(-2019.5, 1931.5),
    glm::vec2(-1791, 2746),
    glm::vec2(-1820, -1533),
    glm::vec2(-4528, -1423.5),
    glm::vec2(2652.5, 973.5),
    glm::vec2(2355.5, 2064.5),
    glm::vec2(2664, 2064.5),
    glm::vec2(2270.5, 1823),
    glm::vec2(2179.5, 1281),
    glm::vec2(2265.5, 1562),
    glm::vec2(407.5, -3051),
    glm::vec2(2060.5, 2756.5),
    glm::vec2(2203, 3001),
    glm::vec2(1655, 2563),
    glm::vec2(1593.5, 2477),
    glm::vec2(1865, 2463),
    glm::vec2(324.5, 959.5),
    glm::vec2(-4552.5, -1352.5),
    glm::vec2(150, -2982.5),
    glm::vec2(-272, 607.5),
    glm::vec2(-256.5, 739.5),
    glm::vec2(1008.5, 1563),
    glm::vec2(869, 1361.5),
    glm::vec2(23, -148.5),
    glm::vec2(-1229.5, 1576),
    glm::vec2(-1438, 1663.5),
    glm::vec2(-820.5, 1927),
    glm::vec2(-1023.5, 2078.5),
    glm::vec2(-269.5, 1139),
    glm::vec2(-68, 978),
    glm::vec2(-99.5, 977),
    glm::vec2(-270.5, 874.5),
    glm::vec2(-350, 829),
    glm::vec2(-3676, -700),
    glm::vec2(-1015, 1064.5),
    glm::vec2(-132, 1379),
    glm::vec2(-671.5, 934),
    glm::vec2(-163.5, 784.5),
    glm::vec2(797.5, -24),
    glm::vec2(624, 191.5),
    glm::vec2(503, 494.5),
    glm::vec2(683.5, 2756.5),
};

bool openGLInitialized = false;
bool nxLinkInitialized = false;
int s_nxlinkSock = -1;

static void deinitNxLink()
{
    if (s_nxlinkSock >= 0)
    {
        close(s_nxlinkSock);
        socketExit();
        s_nxlinkSock = -1;
    }
}

void cleanUp()
{
    // Save settings
    if (!SavefileIO::DirectoryExists("sdmc:/switch/botw-unexplored"))
        mkdir("sdmc:/switch/botw-unexplored", 0777);

    std::ofstream file("sdmc:/switch/botw-unexplored/settings.txt");
    if (file.is_open())
    {
        file << Map::m_CameraPosition.x << "\n";
        file << Map::m_CameraPosition.y << "\n";
        file << Map::m_Zoom << "\n";
        printf("Saved settings\n");
    }
    else
        printf("Failed top open settings file (cleanUp())\n");
    file.close();

    Map::Destory();

    // Cleanup
    romfsExit();

    // Deinitialize EGL
    deinitEgl();

    // Deinitialize network
    deinitNxLink();
    socketExit();
}

int main()
{
    appletLockExit(); // To be able to run memory cleanup when the app closes

    // Setup NXLink
    socketInitializeDefault();
    s_nxlinkSock = nxlinkStdio();
    nxLinkInitialized = true;

    // Init romfs
    romfsInit();

    // Configure our supported input layout: a single player with standard controller styles
    padConfigureInput(1, HidNpadStyleSet_NpadStandard);

    // OpenGL
    // Initialize EGL on the default window
    openGLInitialized = initEgl(nwindowGetDefault());
    if (!openGLInitialized)
        return 0;

    // Load OpenGL routines using glad
    gladLoadGL();

    // OpenGL config
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    // Initialize the default gamepad (which reads handheld mode inputs as well as the first connected controller)
    PadState pad;
    padInitializeDefault(&pad);

    Map::Init();
    Map::m_Pad = &pad;

    MapObject<int> *m = new MapObject<int>[900];
    MapObject<int>::Init("romfs:/shrine.png", 900);
    for (int i = 0; i < 900; i++)
    {
        m[i].m_Found = true;
        m[i].m_Position = glm::vec2(p[i].x, p[i].y) * 0.5f;

    }

    // Load settings if they exist
    std::ifstream settingsFile("sdmc:/switch/botw-unexplored/settings.txt");
    if (settingsFile.is_open())
    {
        std::string line;

        std::getline(settingsFile, line);
        Map::m_CameraPosition.x = std::stof(line);

        std::getline(settingsFile, line);
        Map::m_CameraPosition.y = std::stof(line);

        std::getline(settingsFile, line);
        Map::m_Zoom = std::stof(line);

        if (Map::m_CameraPosition.x > 4500.0f)
            Map::m_CameraPosition.x = 4250.0f;
        if (Map::m_CameraPosition.x < -4500.0f)
            Map::m_CameraPosition.x = -4250.0f;
        if (Map::m_CameraPosition.y > 2500.0f)
            Map::m_CameraPosition.y = 2250.0f;
        if (Map::m_CameraPosition.y < -2000.0f)
            Map::m_CameraPosition.y = -1750.0f;
    }
    else
    {
        printf("Failed to open settings file\n");
    }

    Map::m_CameraPosition = glm::vec2(-163.284f, 784.678f) * 0.5f;
    Map::m_Zoom = 1.0f;

    settingsFile.close();

    bool hasDoneFirstDraw = false;
    bool hasLoadedSave = false;

    while (appletMainLoop())
    {
        // Scan the gamepad. This should be done once for each frame
        padUpdate(&pad);

        u64 buttonsDown = padGetButtonsDown(&pad);

        if (buttonsDown & HidNpadButton_Plus)
            break;

        if (Map::m_ShouldExit)
            break;

        glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
        glClear(GL_COLOR_BUFFER_BIT);

        // Update
        Map::Update();

        // // Render
        Map::Render();

        m[45].Update(true);

        // for (int i = 896; i < ; i++)
        // {
        //     m[i].Update(true);
        // }

        MapObject<int>::Render();

        if (hasDoneFirstDraw && !hasLoadedSave)
        {
            hasLoadedSave = true;
            LoadGamesave();

            Map::UpdateMapObjects();
        }

        eglSwapBuffers(s_display, s_surface);

        GLenum err;
        while ((err = glGetError()) != GL_NO_ERROR)
        {
            printf("OpenGL error: %u\n", err);
        }

        hasDoneFirstDraw = true;
    }

    cleanUp();

    appletUnlockExit(); // Exit the app

    return EXIT_SUCCESS;
}